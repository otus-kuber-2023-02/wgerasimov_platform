## 1. Почему следующая конфигурация валидна, но не имеет смысла?

```livenessProbe:
 exec:
 command:
 - 'sh'
 - '-c'
 - 'ps aux | grep my_web_server_process'
```

Процесс может зависнуть и остаться висеть, при этом под будет считать, что контейнер в нем рабочий и не перезапустит его. 

# Самостоятельная работа по деплою с разными стратегиями

## maxUnavailable: 0 maxSurge: 0
При данной стратегии иземнить версию работающего приложения нет возможности так как кубернетес кластер говорит о том, что не может быть maxUnavailable: 0, когда значение maxSurge: 0
Старые контейнеры и не могут позволить себе удалиться и новые создаться не могут.

## maxUnavailable: 100% maxSurge: 100%
При данной стратегии создаются 3 новых пода и сразу идет удаление 3 старых подов. Эта стратегия плоха тем, что существует перерыв сервиса, когда новые поды не прошли инициализацию и не перешли в состояние Running, а старые уже успешно удалились.


## maxUnavailable: 100% maxSurge: 0
При данной стратегии удаляются все старые поды а на их место стартуют 100% новых подов. Эта стратегия обновления плоха по причине полного перерыва сервиса. 


## Задание со * | DNS через MetalLB
Изучен материал по функционированию MetalLb
Написал манифест службы с типом LoadBalancer для пода coredns
Проверил работоспособность с помощью команды 
```
nslookup web-svc-lb.default.svc.cluster.local 172.17.255.2

Результат:

Name: web-svc-lb.default.svc.cluster.local
Address: 10.97.236.204
```

## Задания со * | Ingress для Dashboard
Развернут Dashboard по мануалу. Написан манифест Ingress, который находится в иректории ./dashboard


## Задания со * | Canary для Ingress

С этого домашнего задания остался Ingress в режиме LoadBalancer, который по адресу http://172.17.255.2/web выдавал "корабль, бороздящий просторы галактики"

Для решения задания со *, развернут деплоймент, который поднимает 1 под и сервис к нему в режиме LoadBalancer.
Написан ингрес, который по заголовку -H "foo: bar" открывает "канареечный" под.
```
Проверка:
curl -H "foo: bar" http://172.7.255.3/web <- "открывается Openresty"
curl -H "foo: one" http://172.7.255.3/web <- "открывается корабль, бороздящий просторы галактики"
curl http://172.7.255.3/web <- "открывается корабль, бороздящий просторы галактики"
```
Манифесты находятся в директории ./canary